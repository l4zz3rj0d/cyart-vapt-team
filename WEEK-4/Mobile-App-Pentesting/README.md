# Mobile Application Penetration Testing (DVAA)
## Overview

This directory documents a mobile application security assessment conducted against the Damn insecure and vulnerable App (DIVA) in a controlled lab environment.
The objective of this exercise was to demonstrate practical mobile security testing techniques using both static and dynamic analysis, aligned with the OWASP Mobile Top 10.

## Scope and Environment

- Target Application: Damn Vulnerable Android App (DVAA / DIVA)

- Platform: Android Emulator (Genymotion)

### Testing Methodology:

- Static analysis (APK reverse engineering)

- Dynamic analysis (runtime behavior and logging inspection)

## Tools Used

- adb (Android Debug Bridge)

- Android Emulator (Genymotion)

- Linux Terminal (Kali)

## Vulnerability 1: Insecure Logging
### Step 1: Identifying the vulnerable activity
While testing the checkout feature, submitting a test credit card resulted in the
error message:
```
An error occured. Please try again later
```
![project incs](Evidence/credit-card.png)

---

The `AndroidManifest.xml` file was reviewed using jadx to understand which
activity handled this feature.

The following activity was identified:
```
 <activity android:label="@string/d1" android:name="jakhar.aseem.diva.LogActivity"/>
```

![project logging](Evidence/logging-activity.png)

### Step 2: Static analysis of application logic (Smali)

The corresponding smali file for the activity was reviewed to understand
application behavior.

The following logging call was identified:

```
invoke-static {v2, v3}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;)I

.line 26
const-string v2, "An error occured. Please try again later"
```
This confirmed that the application was explicitly writing runtime data to the
Android logging system.

![project smali](Evidence/logging-smali.png)

Step 3: Dynamic validation using Logcat

To validate the impact, runtime logs were monitored while performing checkout:
```
adb logcat | grep "credit"  
01-20 13:49:26.700  2512  2512 E diva-log: Error while processing transaction with credit card: 
01-20 13:49:27.035  2512  2512 E diva-log: Error while processing transaction with credit card: 
01-20 13:50:28.184  2512  2512 E diva-log: Error while processing transaction with credit card: 1234123412341234
01-20 14:15:00.573  2512  2512 E diva-log: Error while processing transaction with credit card: 1234123412341234

```
### Impact

Sensitive financial data (credit card numbers) is written to Android logs.
This data could be accessed by:

- Malicious applications on the device

- Anyone with debugging access

- Attackers with physical access

This represents an Insecure Logging vulnerability (OWASP Mobile Top 10 – M2)

## Vulnerability 2: Hardcoded Secret (Smali Analysis)

### Step 1: Reviewing smali code
The application’s smali files were reviewed directly to understand the underlying logic.

Inside the relevant smali file, the following code was identified:

```
const-string v2, "vendorsecretkey"

invoke-virtual {v1, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
move-result v1

if-eqz v1, :cond_0

.line 20
const-string v1, "Access granted! See you on the other side :)"
```
This clearly shows that the secret value "vendorsecretkey" is hardcoded directly into the application logic.

![project key](Evidence/Sensitive_key.png)

Step 2: Exploiting the hardcoded secret

The extracted value was then entered into the application input field.

The application responded with:
```
Access granted! See you on the other side :)

```

![project key](Evidence/correct_key.png)

### Impact

Because the secret is stored directly inside the application code, any attacker can:

Decompile or inspect smali files

Extract sensitive logic or secrets

Bypass security controls without authentication

This demonstrates a Hardcoded Secret vulnerability, caused by insecure client-side trust and improper secret handling.
